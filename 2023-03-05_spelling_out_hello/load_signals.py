#!/usr/bin/python
# Loads the sample data in "recordings.npz" and prints out a few values

import numpy as np
import json

npz_file = np.load('signals.npz')
samples = npz_file['arr_0']
labels = json.load(open('labels.json', 'r'))

print(samples.shape)
# -> (201275, 250, 14)

print('Min value in samples: %d' % samples.min())
# -> 1
print('Max value in samples: %d' % samples.max())
# -> 255
print()

# There's not only one EMG/IMU signal per tick, but also historical data:
HISTORICAL_DATA_SIZE = samples.shape[1]
CHANNEL = 0

# This shows how with each tick, the old samples are shifted by one to the
# side, and a new sample is inserted, resulting in a Toeplitz matrix:
for tick in range(16):
    print(" ".join(str(samples[tick][HISTORICAL_DATA_SIZE-lookbehind][CHANNEL]) for lookbehind in range(1, 9)))
# 116 117 121 118 119 117 117 120
# 116 116 117 121 118 119 117 117
# 121 116 116 117 121 118 119 117
# 119 121 116 116 117 121 118 119
# 119 119 121 116 116 117 121 118
# 118 119 119 121 116 116 117 121
# 119 118 119 119 121 116 116 117
# 119 119 118 119 119 121 116 116
# 121 119 119 118 119 119 121 116
# 119 121 119 119 118 119 119 121
# 118 119 121 119 119 118 119 119
# 118 118 119 121 119 119 118 119
# 119 118 118 119 121 119 119 118
# 116 119 118 118 119 121 119 119
# 117 116 119 118 118 119 121 119
# 121 117 116 119 118 118 119 121

print()

# This shows how each of the 14 channels (8 EMG, 3 Gyroscope, 3 Accelerometer)
# as well as the label varies over time:
for tick in range(20040, 20080):
    print(" ".join(str(samples[tick][249][channel]) for channel in range(14)), end="")
    print('  LABEL="%s"' % labels[tick])
# 117 144 206 106 127 115 119 174 122 121 125 115 88 241  LABEL="e"
# 117 144 208 103 127 115 120 171 122 121 125 115 88 241  LABEL="e"
# 117 144 204 105 124 116 116 172 122 121 125 115 88 241  LABEL="e"
# 118 144 207 105 127 116 119 171 122 121 125 115 88 241  LABEL="e"
# 118 146 205 104 128 116 117 171 122 121 125 115 88 241  LABEL="e"
# 117 145 206 104 128 116 119 169 122 121 125 115 88 241  LABEL="e"
# 120 144 207 106 126 114 116 172 122 121 125 115 88 241  LABEL="e"
# 118 145 207 105 128 114 119 172 122 121 125 115 88 241  LABEL="e"
# 118 145 205 103 129 115 120 172 122 121 125 115 88 241  LABEL="e"
# 119 145 205 102 126 116 118 172 122 121 125 115 88 241  LABEL="e"
# 121 144 208 105 130 116 117 172 130 123 124 113 81 244  LABEL=""
# 118 144 208 105 125 115 118 174 123 122 126 128 77 237  LABEL=""
# 120 145 208 105 126 115 118 172 123 122 126 128 77 237  LABEL=""
# 120 145 206 105 129 116 116 181 123 122 126 128 77 237  LABEL=""
# 120 143 206 103 125 117 118 172 123 122 126 128 77 237  LABEL="e"
# 119 144 209 105 127 116 119 172 123 122 126 128 77 237  LABEL="e"
# 118 145 206 105 126 116 120 173 123 122 126 128 77 237  LABEL="e"
# 117 146 206 106 126 115 120 167 123 122 126 128 77 237  LABEL="e"
# 119 144 207 106 127 116 120 168 123 122 126 128 77 237  LABEL="e"
# 118 145 208 105 128 115 120 170 123 122 126 128 77 237  LABEL="e"
# 118 145 203 104 128 115 121 171 123 122 126 128 77 237  LABEL="e"
# 121 143 207 101 128 113 117 172 123 122 126 128 77 237  LABEL="e"
# 118 145 206 107 128 115 119 170 123 122 126 128 77 237  LABEL="e"
# 120 144 206 102 128 115 120 171 123 122 126 128 77 237  LABEL="e"
# 119 144 205 105 128 116 117 170 123 122 126 128 77 237  LABEL="e"
# 119 144 206 105 125 113 117 171 123 122 126 128 77 237  LABEL="e"
# 118 144 206 103 126 114 117 170 123 122 126 128 77 237  LABEL="e"
# 117 144 205 104 126 116 119 170 123 122 126 128 77 237  LABEL="e"
# 119 144 207 104 125 116 119 171 123 122 126 128 77 237  LABEL="e"
# 118 144 204 105 126 114 118 170 123 122 126 128 77 237  LABEL="e"
# 119 145 207 105 126 116 116 168 123 122 126 128 77 237  LABEL="e"
# 119 144 206 103 129 115 119 172 123 122 126 128 77 237  LABEL="e"
# 119 145 207 104 124 115 120 172 123 122 126 128 77 237  LABEL="e"
# 116 144 205 103 126 116 120 169 123 122 126 128 77 237  LABEL="e"
# 118 145 204 103 127 115 120 171 123 122 126 128 77 237  LABEL="e"
# 117 144 206 103 126 114 117 170 119 120 123 120 85 239  LABEL=""
# 117 144 207 104 127 115 116 170 130 123 124 113 81 244  LABEL=""
# 118 146 206 105 126 115 117 172 130 123 124 113 81 244  LABEL=""
# 119 143 207 106 126 115 116 172 130 123 124 113 81 244  LABEL=""
# 119 145 206 108 127 116 120 170 130 123 124 113 81 244  LABEL=""

CHANNEL_NAMES = "EMG0 EMG1 EMG2 EMG3 EMG4 EMG5 EMG6 EMG7 GyrX GyrY GyrZ AccX AccY AccZ".split()
for tick in range(20052, 20055):
    print()
    print("Tick: %d" % tick)
    print('Label: "%s"' % labels[tick])
    for channel in range(14):
        print("%s: " % CHANNEL_NAMES[channel], end="")
        print(" ".join("%3d" % samples[tick][lookbehind][channel] for lookbehind in range(240, 250)))
# Tick: 20052
# Label: ""
# EMG0: 115 116 119 119 120 117 119 121 118 120
# EMG1: 144 144 143 145 143 144 144 144 144 145
# EMG2: 207 205 206 207 207 206 207 208 208 208
# EMG3: 105 104 105 103 107 105 104 105 105 105
# EMG4: 129 127 128 127 125 126 126 130 125 126
# EMG5: 116 116 115 116 116 116 116 116 115 115
# EMG6: 116 119 120 118 119 118 120 117 118 118
# EMG7: 170 169 168 169 171 168 170 172 174 172
# GyrX: 130 130 130 130 130 130 130 130 123 123
# GyrY: 123 123 123 123 123 123 123 123 122 122
# GyrZ: 124 124 124 124 124 124 124 124 126 126
# AccX: 113 113 113 113 113 113 113 113 128 128
# AccY:  81  81  81  81  81  81  81  81  77  77
# AccZ: 244 244 244 244 244 244 244 244 237 237
# 
# Tick: 20053
# Label: ""
# EMG0: 116 119 119 120 117 119 121 118 120 120
# EMG1: 144 143 145 143 144 144 144 144 145 145
# EMG2: 205 206 207 207 206 207 208 208 208 206
# EMG3: 104 105 103 107 105 104 105 105 105 105
# EMG4: 127 128 127 125 126 126 130 125 126 129
# EMG5: 116 115 116 116 116 116 116 115 115 116
# EMG6: 119 120 118 119 118 120 117 118 118 116
# EMG7: 169 168 169 171 168 170 172 174 172 181
# GyrX: 130 130 130 130 130 130 130 123 123 123
# GyrY: 123 123 123 123 123 123 123 122 122 122
# GyrZ: 124 124 124 124 124 124 124 126 126 126
# AccX: 113 113 113 113 113 113 113 128 128 128
# AccY:  81  81  81  81  81  81  81  77  77  77
# AccZ: 244 244 244 244 244 244 244 237 237 237
# 
# Tick: 20054
# Label: "e"
# EMG0: 119 119 120 117 119 121 118 120 120 120
# EMG1: 143 145 143 144 144 144 144 145 145 143
# EMG2: 206 207 207 206 207 208 208 208 206 206
# EMG3: 105 103 107 105 104 105 105 105 105 103
# EMG4: 128 127 125 126 126 130 125 126 129 125
# EMG5: 115 116 116 116 116 116 115 115 116 117
# EMG6: 120 118 119 118 120 117 118 118 116 118
# EMG7: 168 169 171 168 170 172 174 172 181 172
# GyrX: 130 130 130 130 130 130 123 123 123 123
# GyrY: 123 123 123 123 123 123 122 122 122 122
# GyrZ: 124 124 124 124 124 124 126 126 126 126
# AccX: 113 113 113 113 113 113 128 128 128 128
# AccY:  81  81  81  81  81  81  77  77  77  77
# AccZ: 244 244 244 244 244 244 237 237 237 237
